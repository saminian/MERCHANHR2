<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HR2</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="output.css">
  <link rel="stylesheet" href="style.css">

</head>

<body class="overflow-hidden bg-white-100 font-sans">
  <!-- Navbar -->
  <nav>
    <div class="flex h-16 items-center p-5 justify-between drop-shadow-xl cursor-pointer shadow-lg shadow-gray-300/50">
      <!-- Left Nav -->
      <ul class="flex flex-row items-center space-x-3">
        <li>
          <button onclick="toggleSidebar()">
            <i class="fas fa-bars text-black text-2xl cursor-pointer"></i>
          </button>
        </li>
        <img src="../src/img/gwamlogo.png" alt="LOGO" class="w-11">
        <li class="lg:block md:block text-black text-l font-semibold">HR LEARNING AND PERFORMANCE TRAINING MANAGEMENT</li>
      </ul>
  
      <!-- Right Nav -->
      <div class="flex flex-row items-center space-x-3">
        <button>
          <i class="fas fa-inbox text-black text-xl cursor-pointer"></i>
        </button>
        <button>
          <i class="fas fa-bell text-black text-xl cursor-pointer"></i>
        </button>
        <div class="relative">
          <a href="#" onclick="toggleDropdown()" id="profile-icon" class="rounded-full w-9 h-9 cursor-pointer">
            <img src="../src/img/HR.png" alt="Profile" class="w-9 h-9 rounded-full">
          </a>
          
          <!-- Dropdown Menu -->
          <div id="profileDropdown" class="absolute right-0 mt-2 w-40 bg-white shadow-lg rounded-lg hidden">
            <a href="#" class="block px-4 py-2 text-black hover:bg-gray-200">HR DEPT.</a>
            <a href="dashboard.html" class="block px-4 py-2 text-black hover:bg-gray-200">Log Out</a>
          </div>
        </div>
      </div>
  </nav>

  
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="w-64 bg-white shadow-lg flex-shrink-0 h-screen overflow-y-auto expanded">
      <div class="p-5 mb-14">
        <!-- Dashboard -->
        <div class="sidebar-item">
          <i class="fas fa-tachometer-alt text-amber-500 sidebar-icon"></i>
          <a href="dashboard.html" class="text-xl font-bold text-amber-500 font-sans sidebar-text">DASHBOARD</a>
        </div>
        
        <ul class="mt-5">
          <!-- Learning Management -->
          <li class="sidebar-item mb-2 font-bold font-sans text-amber-500">
            <i class="fas fa-book-reader text-amber-500 sidebar-icon"></i>
            <span class="text-l sidebar-text">Learning and Development</span>
          </li>
          
          <li class="sidebar-item mb-2">
            <i class="fas fa-file-alt text-gray-400 sidebar-icon"></i>
            <a href="#" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2 pr-4  sidebar-text">
              Training Program
            </a>
          </li>
          
          <!-- Performance Management -->
          <li class="sidebar-item mb-2 font-bold font-sans text-amber-500">
            <i class="fa fa-bar-chart text-amber-500 sidebar-icon"></i>
            <span class="text-l sidebar-text">Performance Management</span>
          </li>
          
          <li class="sidebar-item mb-2">
            <a href="#" class="fas fa-users text-gray-400 sidebar-icon"></a>
            <a href="attendancestat.html" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2 pr-1 sidebar-text">
              Attendance Statistics
            </a>
          </li>
          
          <li class="sidebar-item mb-2">
            <a href="#" class="fas fa-chart-line text-gray-400 sidebar-icon"></a>
            <a href="performstatistic.html" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2 pr-1 sidebar-text">
              Performance Statistics
            </a>
          </li>
          
          <li class="sidebar-item mb-2">
            <a href="#" class="fas fa-star text-gray-400 sidebar-icon"></a>
            <a href="#" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2  sidebar-text">
              Performance Evaluation
            </a>
          </li>
          
          <li class="sidebar-item mb-2">
            <a href="status.html"class="fas fa-user-check text-gray-400 sidebar-icon"></a>
            <a href="status.html" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2 pr-1 sidebar-text">
              Employee Training Status
            </a>
          </li>
          
          <!-- Training Management -->
          <li class="sidebar-item mb-2 font-bold font-sans text-amber-500">
            <i class="fas fa-chalkboard-teacher text-amber-500 sidebar-icon"></i>
            <span class="text-l sidebar-text">Training Management</span>
          </li>
          
          <li class="sidebar-item mb-2">
            <a href="schedule.html" class="fas fa-calendar-alt text-gray-400 sidebar-icon"></i>
            <a href="schedule.html" class="block rounded-lg text-sm text-black-600 font-semibold hover:bg-amber-200 hover:pt-2 pb-2 pl-2 pr-6 sidebar-text">
              Training Schedule
            </a>
          </li>
        </ul>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="flex-grow bg-gray-300 p-1 pl-5 overflow-y-auto">
      <div class="p-6">
        <h2 class="text-xl font-bold mb-4 bg-white rounded-xl pt-2 pb-2 indent-4">Training Schedule</h2>
    
        <!-- Container for Search Bar, Add New Trainee Button, and Table -->
        <div class="container mx-auto bg-white h-[70%] mt-5 rounded-xl p-4 shadow-lg">
            <div class="flex justify-between items-center mb-4">
                <input type="text" id="searchTrainee" placeholder="Search..." class="p-1 border border-gray-300 rounded w-1/3">
                <button class="px-4 py-2 bg-amber-500 text-white rounded" onclick="openNewTraineeModal()" id="myBtn">Add New Trainee</button>
            </div>
    
            <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-300 table-fixed">
        <thead>
            <tr class="bg-amber-500">
                <th class="px-4 py-2">Employee Name</th>
                <th class="px-4 py-2">Department</th>
                <th class="px-4 py-2">Email</th>
                <th class="px-4 py-2">Action</th>
            </tr>
        </thead>
        <tbody id="traineeViewList">
            <!-- Trainees will be inserted here dynamically -->
        </tbody>
    </table>
</div>
        </div>
    </div>
    
    <!-- View Modal -->
    <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden" id="viewModal">
      <div class="bg-white p-6 rounded-lg w-1/3 border border-gray-300">
          <span class="close text-xl cursor-pointer float-right" onclick="closeViewModal()">&times;</span>
          <h2 class="text-xl font-semibold mb-4 border-b border-gray-300 pb-2">Trainee Details</h2>
          <div id="traineeDetails" class="py-2 border-b border-gray-300"></div>
      </div>
  </div>
    
    <!-- Add New Trainee Modal -->
    <div class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden" id="myModal">
      <div class="bg-white p-4 rounded-lg w-full max-w-lg mx-4">
          <span class="close text-xl cursor-pointer float-right" onclick="closeModal()">&times;</span>
          <h2 class="text-xl font-semibold mb-4">Add New Trainee</h2>
          <form id="addTraineeForm" class="space-y-2">
              <input type="text" name="lastname" id required placeholder="Last Name" class="w-full p-1 border border-gray-300 rounded">
              <input type="text" name="firstname" required placeholder="First Name" class="w-full p-1 border border-gray-300 rounded">
              <input type="text" name="middlename" required placeholder="Middle Name" class="w-full p-1 border border-gray-300 rounded">
              <input type="text" name="depart" required placeholder="Department" class="w-full p-1 border border-gray-300 rounded">
              <input type="email" name="email" required placeholder="Email" class="w-full p-1 border border-gray-300 rounded">
              <select name="training" required class="w-full p-1 border border-gray-300 rounded">
                  <option value="">Select Training</option>
                  <option value="Training 1">Training 1</option>
                  <option value="Training 2">Training 2</option>
                  <option value="Training 3">Training 3</option>
              </select>
              <input type="date" name="date" required class="w-full p-1 border border-gray-300 rounded">
              <input type="time" name="time" required class="w-full p-1 border border-gray-300 rounded">
              <input type="text" name="venue" required placeholder="Venue" class="w-full p-1 border border-gray-300 rounded">
              <input type="text" name="speaker" required placeholder="Speaker" class="w-full p-1 border border-gray-300 rounded">
              <button type="submit" class="w-full bg-amber-500 text-white py-2 rounded">Add Trainee</button>
          </form>
      </div>
  </div>
    
       
  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('collapsed');
      sidebar.classList.toggle('expanded');
    }

    function toggleDropdown() {
      const dropdown = document.getElementById("profileDropdown");
      dropdown.classList.toggle("hidden");
    }

    // Show scrollbar when the sidebar is hovered
    const sidebar = document.getElementById('sidebar');
    let timer;

    sidebar.addEventListener('mouseenter', () => {
      sidebar.style.overflowY = 'auto';  // Show scrollbar when hovered
      clearTimeout(timer); // Prevent hiding the scrollbar too soon
    });

    sidebar.addEventListener('mouseleave', () => {
      // Hide scrollbar after 2 seconds if no more interaction
      timer = setTimeout(() => {
        sidebar.style.overflowY = 'hidden';
      }, 1000);
    });
    
// Open the "Add New Trainee" modal
function openNewTraineeModal() {
    document.getElementById("myModal").classList.remove("hidden");
}

// Close the "Add New Trainee" modal
function closeModal() {
    document.getElementById("myModal").classList.add("hidden");
}

// Open the "View Trainee Details" modal
function openViewModal() {
    document.getElementById("viewModal").classList.remove("hidden");
}

// Close the "View Trainee Details" modal
function closeViewModal() {
    document.getElementById("viewModal").classList.add("hidden");
}

// Search functionality
document.getElementById("searchTrainee").addEventListener("input", function() {
    let filter = this.value.toLowerCase();
    let rows = document.querySelectorAll("#traineeViewList tr");
    rows.forEach(row => {
        let text = row.textContent.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
    });
});

// Add new trainee to the table
// Open the "Add New Trainee" modal
function openNewTraineeModal() {
        document.getElementById("myModal").classList.remove("hidden");
    }

    // Close the "Add New Trainee" modal
    function closeModal() {
        document.getElementById("myModal").classList.add("hidden");
    }

    // Open the "View Trainee Details" modal
    function openViewModal() {
        document.getElementById("viewModal").classList.remove("hidden");
    }

    // Close the "View Trainee Details" modal
    function closeViewModal() {
        document.getElementById("viewModal").classList.add("hidden");
    }

    // Search functionality
    document.getElementById("searchTrainee").addEventListener("input", function() {
        let filter = this.value.toLowerCase();
        let rows = document.querySelectorAll("#traineeViewList tr");
        rows.forEach(row => {
            let text = row.textContent.toLowerCase();
            row.style.display = text.includes(filter) ? "" : "none";
        });
    });

    // Add new trainee to the table
    document.getElementById("addTraineeForm").addEventListener("submit", function(event) {
    event.preventDefault();

    var lastname = event.target.lastname.value;
    var firstname = event.target.firstname.value;
    var middlename = event.target.middlename.value; // Get the middle name value
    var department = event.target.depart.value;
    var email = event.target.email.value;
    var training = event.target.training.value;
    var date = event.target.date.value;
    var time = event.target.time.value;
    var venue = event.target.venue.value;
    var speaker = event.target.speaker.value;

    // Combine lastname, firstname, and middlename into "Employee Name"
    var employeeName = `${firstname} ${middlename ? middlename + ' ' : ''}${lastname}`;

    var newRow = document.createElement("tr");
    newRow.innerHTML = `
        <td class="px-4 py-2 border break-words">${employeeName}</td> <!-- Use the combined employee name -->
        <td class="px-4 py-2 border break-words">${department}</td>
        <td class="px-4 py-2 border break-words">${email}</td>
        <td class="px-4 py-2 border">
            <button class="view-btn px-2 py-1 bg-green-500 text-white rounded" onclick="viewTrainee(this)">View</button>
            <button class="edit-btn px-2 py-1 bg-yellow-500 text-white rounded" onclick="editTrainee(this)">Edit</button>
            <button class="delete-btn px-2 py-1 bg-red-600 text-white rounded" onclick="deleteTrainee(this)">Delete</button>
        </td>
    `;

    // Store the hidden details as a data attribute in the row
    newRow.setAttribute("data-training", training);
    newRow.setAttribute("data-date", date);
    newRow.setAttribute("data-time", time);
    newRow.setAttribute("data-venue", venue);
    newRow.setAttribute("data-speaker", speaker);

    document.getElementById("traineeViewList").appendChild(newRow);
    closeModal(); // Close the Add Trainee Modal after submission
    event.target.reset(); // Clear the form fields
});

// Delete trainee row
function deleteTrainee(button) {
    var row = button.closest("tr");
    row.remove();
}

// Edit trainee row
function editTrainee(button) {
    var row = button.closest("tr");
    var cells = row.querySelectorAll("td");

    document.getElementById("addTraineeForm").lastname.value = cells[0].textContent.split(' ').pop(); // Last name
    document.getElementById("addTraineeForm").firstname.value = cells[0].textContent.split(' ')[0]; // First name
    document.getElementById("addTraineeForm").middlename.value = cells[0].textContent.split(' ').slice(1, -1).join(' '); // Middle name (if exists)
    document.getElementById("addTraineeForm").depart.value = cells[1].textContent;
    document.getElementById("addTraineeForm").email.value = cells[2].textContent;

    document.getElementById("addTraineeForm").training.value = row.getAttribute("data-training");
    document.getElementById("addTraineeForm").date.value = row.getAttribute("data-date");
    document.getElementById("addTraineeForm").time.value = row.getAttribute("data-time");
    document.getElementById("addTraineeForm").venue.value = row.getAttribute("data-venue");
    document.getElementById("addTraineeForm").speaker.value = row.getAttribute("data-speaker");

    row.remove(); // Remove the old row
    openNewTraineeModal(); // Open the Add Trainee modal
}

// View trainee details in modal
function viewTrainee(button) {
    var row = button.closest("tr");

    var details = `
        <div class="space-y-2">
            <p><strong>Employee Name:</strong> ${row.cells[0].textContent}</p>
            <p><strong>Department:</strong> ${row.cells[1].textContent}</p>
            <p><strong>Email:</strong> ${row.cells[2].textContent}</p>
            <p><strong>Training:</strong> ${row.getAttribute("data-training")}</p>
            <p><strong>Date:</strong> ${row.getAttribute("data-date")}</p>
            <p><strong>Time:</strong> ${row.getAttribute("data-time")}</p>
            <p><strong>Venue:</strong> ${row.getAttribute("data-venue")}</p>
            <p><strong>Speaker:</strong> ${row.getAttribute("data-speaker")}</p>
        </div>
    `;

    document.getElementById("traineeDetails").innerHTML = details;
    openViewModal(); // Open the View Trainee modal
}
  </script>
</body>
</html>
